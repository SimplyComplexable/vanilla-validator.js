function Validator(e,t){function r(e,t){if(Object.assign)return Object.assign(e,t);var r={};for(var a in e)r[a]=e[a];for(var a in t)r[a]=t[a];return r}this.form=e,t&&(this.opts=r(this.opts,t)),this.opts.errorValues=r(this.opts.errorValues,this.getErrorValues(this.form));var a=this;if(this.reqInputs=this.form.querySelectorAll("[data-"+this.opts.attributes.validate+"]"),this.opts.attachToEvents.change)for(var s=0;s<this.reqInputs.length;s++)this.reqInputs.item(s).addEventListener("change",function(e){a.validateInput(this,e.target.value)},!1);this.opts.attachToEvents.submit&&this.form.addEventListener("submit",function(e){if(e.preventDefault(),a.validateNodeList(a.reqInputs))return t.then(this)})}function getDataAttribute(e,t){if(e.dataset){var r=t.split("-").map(function(e,t){return t?e.charAt(0).toUpperCase()+e.substr(1):e}).join("");return e.dataset[r]}return e.getAttribute("data-"+t)}Validator.prototype.opts={dateValidator:null,then:function(e){e.submit()},attributes:{validate:"validate",errorMessage:"error-message",errorClass:"error-class",errorInputClass:"error-input-class"},delimiters:{function:",",parameters:":"},errorValues:{eClass:"error-message",eInputClass:"error-input",eMessage:"Please enter a valid value"},attachToEvents:{change:!0,submit:!0}},Validator.prototype.generalTests={required:function(e,t){return!!t},length:function(e,t,r){return r[1]?t.length>=r[0]&&t.length<=r[1]:t.length>=r[0]},regex:function(e,t,r){return new RegExp(r[0]).test(t)},vals:function(e,t,r){for(var a=t.toLowerCase(),s=[],o=0;o<r.length;o++)if(-1!==r[o].indexOf("!")){if(-1!==a.indexOf(r[0].substr(1)))return!1}else s.push(r[o].toLowerCase());return!s.length||new RegExp("^("+r.join("|")+")$").test(a)},number:function(e,t,r){var a=Number(t);return!isNaN(a)&&(!r[0]||(r[1]?a>=r[0]&&a<=r[1]:a>=r[0]))},phone:function(e,t,r){var a=Number(t.replace(/\D+/g,"")).toString().length;return void 0===r[0]?11===a||10===a:Number(r[0])?11===a:10===a},email:function(e,t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)},date:function(e,t,r){var a,s=this.opts.dateValidator,o=s.toString();return console.time("DateValidator"),a=-1!==o.indexOf("DateValidator")?s.testDate(t,r[0]):s.isMoment?s(t,r[0],!0).isValid():"Invalid Date"!==new Date(t)&&!isNaN(new Date(t)),console.timeEnd("DateValidator"),console.log(a),a},time:function(e,t,r){},datetime:function(e,t,r){},url:function(e,t,r){var a=void 0===r[0]?"":r[0]?"https://(www.)?":"https?://(www.)?";return new RegExp(a+"[-a-zA-Z0-9@:%._+~#=]{2,256}.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)").test(t)},match:function(e,t,r){return t===this.form.querySelector("#"+r[0]).value}},Validator.prototype.tests={text:{required:Validator.prototype.generalTests.required,regex:Validator.prototype.generalTests.regex,length:Validator.prototype.generalTests.length,number:Validator.prototype.generalTests.number,phone:Validator.prototype.generalTests.phone,email:Validator.prototype.generalTests.email,vals:Validator.prototype.generalTests.vals,url:Validator.prototype.generalTests.url,date:Validator.prototype.generalTests.date,match:Validator.prototype.generalTests.match},"select-one":{required:Validator.prototype.generalTests.required,vals:Validator.prototype.generalTests.vals},checkbox:{required:function(){return this.checked},checked:function(){return this.checked}},color:{vals:Validator.prototype.generalTests.vals,range:function(e,t,r){for(var a=0;a<r.length;a++)r[a]=parseInt(r[a],16);return t=parseInt(t.substr(1),16),!r[0]||(r[1]?t>=r[0]&&t<=r[1]:t>=r[0])}},date:{required:Validator.prototype.generalTests.required},file:{required:Validator.prototype.generalTests.required,accept:function(e,t){for(var r=getDataAttribute("accept").split(",").map(function(e){return e.trim()}),a=!1,s=0;s<r.length;s++)if(new RegExp(r[s]+"$").test(t)){a=!0;break}return a}},hidden:{required:Validator.prototype.generalTests.required,regex:Validator.prototype.generalTests.regex,length:Validator.prototype.generalTests.length,number:Validator.prototype.generalTests.number,phone:Validator.prototype.generalTests.phone,email:Validator.prototype.generalTests.email,vals:Validator.prototype.generalTests.vals,url:Validator.prototype.generalTests.url,match:Validator.prototype.generalTests.match},number:{required:Validator.prototype.generalTests.required,range:Validator.prototype.generalTests.number,match:Validator.prototype.generalTests.match},password:{required:Validator.prototype.generalTests.required,regex:Validator.prototype.generalTests.regex,length:Validator.prototype.generalTests.length,number:Validator.prototype.generalTests.number,match:Validator.prototype.generalTests.match},radio:{required:function(e){return!!document.querySelector('input[name="'+e.name+'"]:checked')}},search:{required:Validator.prototype.generalTests.required,regex:Validator.prototype.generalTests.regex,length:Validator.prototype.generalTests.length,number:Validator.prototype.generalTests.number,phone:Validator.prototype.generalTests.phone,email:Validator.prototype.generalTests.email,vals:Validator.prototype.generalTests.vals,url:Validator.prototype.generalTests.url,match:Validator.prototype.generalTests.match}},Validator.prototype.getErrorValues=function(e){var t=this.opts.attributes;return{eClass:getDataAttribute(e,t.errorClass),eInputClass:getDataAttribute(e,t.errorInputClass),eMessage:getDataAttribute(e,t.errorMessage)}},Validator.prototype.validateInput=function(e,t,r){function a(e,t){t&&(e.classList?e.classList.add(t):e.className+=" "+t)}r||(r=this.opts);var s=r.attributes,o=getDataAttribute(e,this.opts.attributes.validate).split(r.delimiters.function),n=!0;for(var i in o)try{var l=o[i].split(r.delimiters.parameters);if(!this.tests[e.type][l[0]].call(this,e,e.value,l.splice(1))){n=!1;break}}catch(t){console.error(t),console.error("Invalid rule: "+l[0]+" on type "+e.type)}var u=e.parentElement,p=u.querySelector("span."+r.errorValues.eClass),d=getDataAttribute(e,s.errorInputClass)||r.errorValues.eInputClass;if(n){if(p&&u.removeChild(p),d)if(e.classList)e.classList.remove(d);else{var g=e.className.indexOf(d);g&&(e.className=e.className.substr(g,d.length))}return!0}d&&a(e,d),p||(p=document.createElement("span"));var c=s.errorMessage,h=c+"-"+l[0].toLowerCase();this.form&&!r.errorValues[h]&&(r.errorValues[h]=getDataAttribute(this.form,h)),p.innerText=getDataAttribute(e,h)||r.errorValues[h]||getDataAttribute(e,c)||r.errorValues.eMessage;var m=getDataAttribute(e,s.errorClass)||r.errorValues.eClass;return m&&a(p,m),u.appendChild(p),!1},Validator.prototype.validateNodeList=function(e,t){for(var r=!0,a=0;a<e.length;a++)this.validateInput(e.item(a),e.item(a).value),t&&(r=!1);return r&&t&&t.then&&t.then(),r};
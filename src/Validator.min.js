function Validator(e,t){this.form=e,t&&(this.opts=mergeObjects(this.opts,t)),this.opts.errorValues=mergeObjects(this.opts.errorValues,this.getErrorValues(this.form));var r=this;if(this.reqInputs=this.form.querySelectorAll("[data-"+this.opts.attributes.validate+"]"),this.opts.attachToEvents.change)for(var a=0;a<this.reqInputs.length;a++)this.reqInputs.item(a).addEventListener("change",function(e){r.validateInput(this)},!1);this.opts.attachToEvents.submit&&this.form.addEventListener("submit",function(e){if(e.preventDefault(),r.validateNodeList(r.reqInputs))return r.opts.then(this)})}function getDataAttribute(e,t){if(e.dataset){var r=t.split("-").map(function(e,t){return t?e.charAt(0).toUpperCase()+e.substr(1):e}).join("");return e.dataset[r]}return e.getAttribute("data-"+t)}function mergeObjects(e,t){var r={},a=[].slice.call(arguments);for(var s in a)for(var o in a[s])if("object"==typeof a[s][o]&&a[s][o]){var n=Number(s)?r[o]:{};for(var l in a[s][o])a[s][o][l]&&(n[l]=a[s][o][l]);r[o]=n}else a[s][o]&&(r[o]=a[s][o]);return r}Validator.prototype.opts={dateValidator:null,then:function(e){e.submit()},attributes:{validate:"validate",errorMessage:"error-message",errorClass:"error-class",errorInputClass:"error-input-class"},delimiters:{func:",",parameters:":"},errorValues:{eClass:"error-message",eInputClass:"error-input",eMessage:"Please enter a valid value"},attachToEvents:{change:!0,submit:!0}},Validator.prototype.generalTests={required:function(e){return!!e.value},length:function(e,t){var r=e.value;return t[1]?r.length>=t[0]&&r.length<=t[1]:r.length>=t[0]},regex:function(e,t){return new RegExp(t[0]).test(e.value)},vals:function(e,t){for(var r=e.value.toLowerCase(),a=[],s=0;s<t.length;s++)if(-1!==t[s].indexOf("!")){if(-1!==r.indexOf(t[0].substr(1)))return!1}else a.push(t[s].toLowerCase());return!a.length||new RegExp("^("+t.join("|")+")$").test(r)},number:function(e,t){var r=Number(e.value);return!isNaN(r)&&(!t[0]||(t[1]?r>=t[0]&&r<=t[1]:r>=t[0]))},phone:function(e,t){var r=Number(e.value.replace(/\D+/g,"")).toString().length;return void 0===t[0]?11===r||10===r:Number(t[0])?11===r:10===r},email:function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value)},date:function(e,t){var r=e.value,a=this.opts.dateValidator;return a?-1!==a.toString().indexOf("DateValidator")?a.testDate(r,t[0]):a.isMoment?a(r,t[0],!0).isValid():void 0:"Invalid Date"!==new Date(r)&&!isNaN(new Date(r))},url:function(e,t){var r=void 0===t[0]?"":t[0]?"https://(www.)?":"https?://(www.)?";return new RegExp(r+"[-a-zA-Z0-9@:%._+~#=]{2,256}.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)").test(e.value)},match:function(e,t){return e.value===this.form.querySelector("#"+t[0]).value}},Validator.prototype.tests={text:{required:Validator.prototype.generalTests.required,regex:Validator.prototype.generalTests.regex,length:Validator.prototype.generalTests.length,number:Validator.prototype.generalTests.number,phone:Validator.prototype.generalTests.phone,email:Validator.prototype.generalTests.email,vals:Validator.prototype.generalTests.vals,url:Validator.prototype.generalTests.url,date:Validator.prototype.generalTests.date,match:Validator.prototype.generalTests.match},"select-one":{required:Validator.prototype.generalTests.required,vals:Validator.prototype.generalTests.vals},checkbox:{required:function(){return this.checked},checked:function(){return this.checked}},color:{vals:Validator.prototype.generalTests.vals,range:function(e,t){for(var r=0;r<t.length;r++)t[r]=parseInt(t[r],16);var a=parseInt(e.value.substr(1),16);return!t[0]||(t[1]?a>=t[0]&&a<=t[1]:a>=t[0])}},date:{required:Validator.prototype.generalTests.required},file:{required:Validator.prototype.generalTests.required,accept:function(e){for(var t=getDataAttribute("accept").split(",").map(function(e){return e.trim()}),r=!1,a=0;a<t.length;a++)if(new RegExp(t[a]+"$").test(e.value)){r=!0;break}return r}},hidden:{required:Validator.prototype.generalTests.required,regex:Validator.prototype.generalTests.regex,length:Validator.prototype.generalTests.length,number:Validator.prototype.generalTests.number,phone:Validator.prototype.generalTests.phone,email:Validator.prototype.generalTests.email,vals:Validator.prototype.generalTests.vals,url:Validator.prototype.generalTests.url,match:Validator.prototype.generalTests.match},number:{required:Validator.prototype.generalTests.required,range:Validator.prototype.generalTests.number,match:Validator.prototype.generalTests.match},password:{required:Validator.prototype.generalTests.required,regex:Validator.prototype.generalTests.regex,length:Validator.prototype.generalTests.length,number:Validator.prototype.generalTests.number,match:Validator.prototype.generalTests.match},radio:{required:function(e){return!!document.querySelector('input[name="'+e.name+'"]:checked')}},search:{required:Validator.prototype.generalTests.required,regex:Validator.prototype.generalTests.regex,length:Validator.prototype.generalTests.length,number:Validator.prototype.generalTests.number,phone:Validator.prototype.generalTests.phone,email:Validator.prototype.generalTests.email,vals:Validator.prototype.generalTests.vals,url:Validator.prototype.generalTests.url,match:Validator.prototype.generalTests.match}},Validator.prototype.getErrorValues=function(e){var t=this.opts.attributes;return{eClass:getDataAttribute(e,t.errorClass),eInputClass:getDataAttribute(e,t.errorInputClass),eMessage:getDataAttribute(e,t.errorMessage)}},Validator.prototype.validateInput=function(e,t){function r(e,t){t&&(e.classList?e.classList.add(t):e.className+=" "+t)}var a=(t=t?mergeObjects(this.opts,t):this.opts).attributes,s=getDataAttribute(e,this.opts.attributes.validate).split(t.delimiters.func),o=!0;for(var n in s)try{var l=s[n].split(t.delimiters.parameters);if(!e.value&&"required"!==l[0])continue;if(!this.tests[e.type][l[0]].call(this,e,l.splice(1))){o=!1;break}}catch(t){console.error("Invalid rule: "+l[0]+" on type "+e.type)}var i=e.parentElement,u=i.querySelector("span."+t.errorValues.eClass),p=getDataAttribute(e,a.errorInputClass)||t.errorValues.eInputClass;if(o){if(u&&i.removeChild(u),p)if(e.classList)e.classList.remove(p);else{var d=e.className.indexOf(p);d&&(e.className=e.className.substr(d,p.length))}return!0}p&&r(e,p),u||(u=document.createElement("span"));var g=a.errorMessage,c=g+"-"+l[0].toLowerCase();this.form&&!t.errorValues[c]&&(t.errorValues[c]=getDataAttribute(this.form,c)),u.innerText=getDataAttribute(e,c)||t.errorValues[c]||getDataAttribute(e,g)||t.errorValues.eMessage;var h=getDataAttribute(e,a.errorClass)||t.errorValues.eClass;return h&&r(u,h),i.appendChild(u),!1},Validator.prototype.validateNodeList=function(e,t){for(var r=!0,a=0;a<e.length;a++)this.validateInput(e.item(a),t)||(r=!1);return r&&t&&t.then&&t.then(),r};